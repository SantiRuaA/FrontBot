<div class="container is-fullhd box">
  <h1 class="title">Items Guardados</h1>
  <p class="subtitle">Aquí encontrarás todas las respuestas que has guardado desde el generador.</p>

  <ng-container *ngIf="view$ | async as view">
    <ng-container *ngIf="!view.isLoading; else loadingTemplate">
      <div *ngIf="view.documents.length === 0" class="notification is-info is-light">
        No hay items guardados todavía. Ve al generador para crear y guardar algunos.
      </div>

      <div *ngFor="let doc of view.documents" class="card mb-4">
        <div class="card-content">
          <div class="content" [innerHTML]="doc.content | nl2br"></div>
        </div>
        <footer class="card-footer">
          <p class="card-footer-item">
            <span>Guardado por: <strong class="has-text-grey">{{ doc.role }}</strong></span>
          </p>
          <p class="card-footer-item">
            <span>Fecha: <strong class="has-text-grey">{{ doc.createdAt | date:'short' }}</strong></span>
          </p>
        </footer>
      </div>

      <nav class="pagination is-centered mt-4" role="navigation" *ngIf="view.total > view.limit">
        <button class="pagination-previous" 
                (click)="changePage(view.currentPage - 1)" 
                [disabled]="view.currentPage === 1">
            Anterior
        </button>
        <button class="pagination-next" 
                (click)="changePage(view.currentPage + 1)" 
                [disabled]="view.currentPage * view.limit >= view.total">
            Siguiente
        </button>
        <ul class="pagination-list">
            <li>
                <a class="pagination-link is-current">{{ view.currentPage }}</a>
            </li>
        </ul>
      </nav>
    </ng-container>
  </ng-container>

  <ng-template #loadingTemplate>
    <div class="has-text-centered p-6">
      <button class="button is-loading is-ghost is-large">Cargando items...</button>
    </div>
  </ng-template>
</div>